(function(){function e(e){function c(){if(s&&r<e){var t=s,n=t[0],f=Array.prototype.slice.call(t,1),l=t.index;s===o?s=o=null:s=s.next,++r,f.push(function(e,t){--r;if(u!=null)return;e!=null?(u=e,i=a=s=o=null,h()):(a[l]=t,--i?c():h())}),n.apply(null,f)}}function h(){u!=null?f(u):l?f(null,a):f.apply(null,[null].concat(a))}var n={},r=0,i=0,s,o,u=null,a=[],f=t,l;return arguments.length<1&&(e=Infinity),n.defer=function(){if(!u){var e=arguments;e.index=a.push(undefined)-1,o?(o.next=e,o=o.next):s=o=e,++i,c()}return n},n.await=function(e){return f=e,l=!1,i||h(),n},n.awaitAll=function(e){return f=e,l=!0,i||h(),n},n}function t(){}typeof module=="undefined"?self.queue=e:module.exports=e,e.version="1.0.1"})();